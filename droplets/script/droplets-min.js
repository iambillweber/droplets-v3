/**
 * DROPLETS
 *
 * @version: 2.0.3_1
 * @author: Ethan Lin
 * @url: https://github.com/oel-mediateam/droplets-for-canvas
 *
 * @license: The MIT License (MIT)
 * Copyright 2018-2019 UWEX CEOEL Media
 *
 */
"use strict";function checkEnvironment(){let e;switch(isOnAllowedDomains()){case".instructure.com/":document.getElementById("uws-droplets-page")?setDropletJsForCanvas():observeUserContentReady(),setTimeout((function(){let e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.setAttribute("id","uws-droplets-poke"),e.append(t);let o=document.getElementById("uws-droplets-poke");e.removeChild(o)}),3e3);break;default:checkDropletsComponents();break}}function checkDropletsComponents(){var e=document.getElementById("uws-droplets-page"),t=e.getBoundingClientRect();e.setAttribute("data-x",t.x),e.setAttribute("data-y",t.y);var o="#uws-droplets-page .droplets-",n=document.querySelectorAll(o+"tooltip"),s=document.querySelectorAll(o+"popover"),i=document.querySelectorAll(o+"tabs"),a=document.querySelectorAll(o+"accordion"),r=document.querySelectorAll(o+"resources"),l=document.querySelectorAll(o+"readmore"),c=document.querySelectorAll(o+"reveal"),d=document.querySelectorAll(o+"image-zoom"),u=document.querySelectorAll(o+"lightbox");n.length&&enableToolTips(n),s.length&&enablePopovers(s),i.length&&enableTabs(i),a.length&&enableAccordions(a),r.length&&enableResources(r),l.length&&enableReadMore(l),c.length&&enableReveal(c),d.length&&enableImgZoom(d),u.length&&enableLightbox(u)}function enableToolTips(e){Array.prototype.forEach.call(e,(function(e){e.addEventListener("mouseenter",(function(){var t=this.getAttribute("title"),o={left:this.offsetLeft,top:this.offsetTop,bottom:this.offsetTop-this.offsetHeight},n=0,s=0;e.setAttribute("data-tip",t),t=e.getAttribute("data-tip");var i=document.createElement("div");i.classList.add("tooltip");var a=document.createElement("div");a.classList.add("tooltip-inner"),a.innerHTML=t,i.appendChild(a),this.insertBefore(i,this.firstChild),this.classList.contains("top")?(n=o.top-i.offsetHeight-2,s=o.left):this.classList.contains("bottom")?(n=o.top+i.offsetHeight-5,s=o.left):this.classList.contains("right")?(n=o.top,s=o.left+this.offsetWidth+5):this.classList.contains("left")?(n=o.top,s=o.left-i.offsetWidth-5):(n=o.top-i.offsetHeight-2,s=o.left),i.style.top=n+"px",i.style.left=s+"px",this.removeAttribute("title"),this.addEventListener("mouseleave",(function(){null!==i.parentNode&&i.parentNode.removeChild(i),this.setAttribute("title",t)}))}))}))}function enablePopovers(e){Array.prototype.forEach.call(e,(function(e){var t="";null!==e.getAttribute("data-title")?t=e.getAttribute("data-title"):(t=e.getAttribute("title"),e.setAttribute("data-title",t),t=e.getAttribute("data-title"));var o=document.createElement("div");o.classList.add("popover"),o.setAttribute("role","tooltip");var n=document.createElement("div");n.classList.add("popover-content"),n.innerHTML=t,o.appendChild(n),e.insertBefore(o,e.firstChild),e.addEventListener("click",(function(){if("block"===this.querySelector(".popover").style.display)this.querySelector(".popover").style.display="none",this.classList.remove("active");else{this.classList.add("active"),o.style.display="block";var e=0,t=0,n=this.offsetWidth-(o.offsetWidth+this.offsetWidth)/2,s=this.offsetHeight-(o.offsetHeight+this.offsetHeight)/2;this.classList.contains("top")?(o.classList.add("top"),e=-1*(o.offsetHeight+10),t=n):this.classList.contains("bottom")?(o.classList.add("bottom"),e=this.offsetHeight+10,t=n):this.classList.contains("right")?(o.classList.add("right"),e=s,t=this.offsetWidth+10):this.classList.contains("left")?(o.classList.add("left"),e=s,t=-1*(o.offsetWidth+10)):(o.classList.add("top"),e=-1*(o.offsetHeight+10),t=n),o.style.top=e+"px",o.style.left=t+"px"}})),e.addEventListener("mouseenter",(function(){this.removeAttribute("title"),this.addEventListener("mouseleave",(function(){this.setAttribute("title",t)}))}))}))}function enableTabs(e){Array.prototype.forEach.call(e,(function(e){var t=e.querySelectorAll(".tabs li"),o=e.querySelectorAll(".tab-contents .tab-section");Array.prototype.forEach.call(t,(function(e,n){e.addEventListener("click",(function(e){Array.prototype.forEach.call(t,(function(e,t){e.classList.remove("active"),e.setAttribute("aria-selected","false"),o[t].classList.remove("active")})),this.classList.add("active"),this.setAttribute("aria-selected","true"),o[n].classList.add("active"),o[n].setAttribute("aria-selected","true"),e.preventDefault()}))}))}))}function enableAccordions(e){Array.prototype.forEach.call(e,(function(e){var t=e.querySelectorAll(".accordion-title"),o=document.createElement("div");o.classList.add("accordion-controls");var n=document.createElement("a");n.classList.add("closeAll"),n.setAttribute("role","button"),n.innerHTML="Close All",n.href="javascript:void(0)";var s=document.createElement("a");s.classList.add("openAll"),s.setAttribute("role","button"),s.innerHTML="Open All",s.href="javascript:void(0)",o.appendChild(n),o.appendChild(s),e.insertBefore(o,e.firstChild),n.addEventListener("click",(function(e){Array.prototype.forEach.call(t,(function(e){closeAccordionItem(e)})),e.preventDefault()})),s.addEventListener("click",(function(e){Array.prototype.forEach.call(t,(function(e){openAccordionItem(e)})),e.preventDefault()})),Array.prototype.forEach.call(t,(function(e){e.classList.contains("active")&&openAccordionItem(e),e.addEventListener("click",(function(e){this.classList.contains("active")?closeAccordionItem(this):(Array.prototype.forEach.call(t,(function(e){closeAccordionItem(e)})),openAccordionItem(this)),e.preventDefault()}))}))}))}function closeAccordionItem(e){e.classList.contains("active")&&(e.nextElementSibling.style.display="none",e.nextElementSibling.setAttribute("aria-expanded","false"),e.classList.remove("active"))}function openAccordionItem(e){e.classList.add("active"),e.nextElementSibling.setAttribute("aria-expanded","true"),e.nextElementSibling.style.display="block"}function enableResources(e){Array.prototype.forEach.call(e,(function(e){var t=e.querySelectorAll(".resource");Array.prototype.forEach.call(t,(function(e){var t=e.querySelectorAll(".cover-info");Array.prototype.forEach.call(t,(function(e){var t=document.createElement("div");t.classList.add("arrow"),e.parentNode.insertBefore(t,e.nextSibling),t.addEventListener("click",(function(){this.parentNode.classList.contains("expanded")?this.parentNode.classList.remove("expanded"):this.parentNode.classList.add("expanded")}))}))}))}))}function enableReadMore(e){Array.prototype.forEach.call(e,(function(e){var t=document.createElement("div");t.classList.add("readmore-cntrl"),t.setAttribute("aria-hidden","true"),e.appendChild(t),t.addEventListener("click",(function(){if(this.classList.contains("opened"))this.classList.remove("opened"),e.style.height=null,e.style.overflow="hidden";else{var t=e.scrollHeight+"px";this.classList.add("opened"),e.style.height=t,e.style.overflow="unset"}}))}))}function enableReveal(e){Array.prototype.forEach.call(e,(function(e){var t=document.createElement("a");t.classList.add("btn","success","small"),t.setAttribute("aria-hidden","true"),t.innerHTML=e.getAttribute("data-button-name"),e.appendChild(t),t.addEventListener("click",(function(){var t=e.querySelectorAll(".hidden-content")[0];"inherit"!==t.style.display?(t.style.display="inherit",this.classList.remove("success"),this.innerHTML="Hide"):(t.style.display="none",this.classList.add("success"),this.innerHTML=e.getAttribute("data-button-name"))}))}))}function enableImgZoom(e){Array.prototype.forEach.call(e,(function(e){var t=e.querySelector("img"),o=document.createElement("div");o.classList.add("magnify"),o.style.backgroundImage='url("'+t.src+'")',e.appendChild(o),e.addEventListener("mousemove",(function(e){var n=new Image;n.src=t.src,t.setAttribute("data-width",n.width),t.setAttribute("data-height",n.height);var s=t.getAttribute("data-width"),i=t.getAttribute("data-height"),a=document.getElementById("uws-droplets-page"),r=Number(a.getAttribute("data-x")),l=Number(a.getAttribute("data-y")),c=e.pageX-r-this.offsetLeft,d=e.pageY-l-this.offsetTop;if(c<this.offsetWidth&&d<this.offsetHeight&&c>0&&d>0){o.classList.add("show");var u=-1*Math.round(c/t.offsetWidth*s-o.offsetWidth/2),p=-1*Math.round(d/t.offsetHeight*i-o.offsetHeight/2);o.style.left=c-o.offsetWidth/2+"px",o.style.top=d-o.offsetHeight/2+"px",100!=u&&100!=p&&(o.style.backgroundPosition=u+"px "+p+"px")}else o.classList.remove("show")}))}))}function enableLightbox(e){var t=document.getElementById("uws-droplets-page"),o=document.createElement("div");o.classList.add("droplets-lightbox-overlay"),o.setAttribute("aria-hidden","true");var n=document.createElement("div");n.classList.add("overlay-content");var s=document.createElement("a");s.classList.add("overlay-close-btn"),s.setAttribute("role","button");var i=document.createElement("a");i.classList.add("overlay-left-arrow"),i.setAttribute("role","button");var a=document.createElement("a");a.classList.add("overlay-right-arrow"),a.setAttribute("role","button"),o.appendChild(i),o.appendChild(a),o.appendChild(s),o.appendChild(n),t.appendChild(o),o.addEventListener("click",(function(e){e.target===this&&o.classList.contains("show-overlay")&&o.classList.remove("show-overlay")})),s.addEventListener("click",(function(){o.classList.contains("show-overlay")&&o.classList.remove("show-overlay")})),Array.prototype.forEach.call(e,(function(e){var t;if(isImgFigCombo(e.querySelectorAll("img, figure"))){var s=document.createElement("div");s.classList.add("callout","danger","lightbox-error");var r=document.createElement("p");return r.innerHTML="<strong>Error:</strong> Do not mix img and figure tags.",s.appendChild(r),void e.appendChild(s)}var l=e.querySelectorAll("img"),c=e.querySelectorAll("figure"),d=c;0===c.length&&(d=l),Array.prototype.forEach.call(d,(function(e,t){var s=0;e.addEventListener("click",(function(r){d.length>1?(a.style.display="inherit",a.addEventListener("click",(function(e){++s>d.length-1&&(s=0),selectImage(d[s],n),e.preventDefault()})),i.style.display="inherit",i.addEventListener("click",(function(e){--s<0&&(s=d.length-1),selectImage(d[s],n),e.preventDefault()}))):(a.style.display="none",a.removeEventListener("click",(function(){})),i.style.display="none",i.removeEventListener("click",(function(){}))),selectImage(e,n),o.classList.add("show-overlay"),s=t,r.preventDefault()}))}))}))}function isImgFigCombo(e){var t=0,o=0;return Array.prototype.forEach.call(e,(function(e){"IMG"===e.nodeName?t++:"FIGURE"===e.nodeName&&o++})),t>=1&&o>=1&&t>o}function selectImage(e,t){t.innerHTML="";var o=document.createElement("img"),n=document.createElement("p");if("IMG"===e.nodeName)o.src=e.src,n.classList.add("caption"),n.innerHTML=e.getAttribute("alt");else if("FIGURE"===e.nodeName){var s=e.querySelector("img"),i=e.querySelector("figcaption");o.src=s.src,n.classList.add("caption"),n.innerHTML=i?i.innerHTML:s.getAttribute("alt")}t.appendChild(o),t.appendChild(n)}function isOnAllowedDomains(){var e="";return Array.prototype.forEach.call(allowedDomains,(function(t){var o=new RegExp(t);location.href.match(o)&&(e=t)})),e}function observeUserContentReady(e,t){const o=document.getElementById("uws-droplets-page");if(!o&&void 0===t){const e=new MutationObserver(observeUserContentReady);e.observe(document.body,{childList:!0})}o&&(void 0!==t&&t.disconnect(),setDropletJsForCanvas())}function setDropletJsForCanvas(){let e=document.getElementsByTagName("body")[0],t=document.getElementById("uws-droplets-page");if(null!=t){let o;t.classList.add("canvas-net"),!1===onCanvasContentPage(/\/pages/)?t.classList.add("no-js"):(e.classList.contains("uws-droplets-js-disabled")&&e.classList.remove("uws-droplets-js-disabled"),checkDropletsComponents())}else e.classList.add("uws-droplets-js-disabled")}function onCanvasContentPage(e){return!!location.pathname.match(e)}let allowedDomains=["localhost/","media.uwex.edu/",".instructure.com/","lar18elin.local:"];!function e(t){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",checkEnvironment)}(checkEnvironment);